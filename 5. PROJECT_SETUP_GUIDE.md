# 🚀 Privacy Cohort Tracker - Complete Setup Guide for New Team Members

This guide will help new team members quickly set up and run the Privacy Cohort Tracker project locally.

## 📋 **Prerequisites**

### **Required Software**
- **Node.js**: Version 18.0.0 or higher ([Download here](https://nodejs.org/))
- **npm**: Version 8.0.0 or higher (comes with Node.js)
- **Git**: Latest version ([Download here](https://git-scm.com/))

### **Optional but Recommended**
- **Visual Studio Code**: With TypeScript and ESLint extensions
- **Chrome/Firefox**: For browser extension testing

### **System Requirements**
- **RAM**: Minimum 8GB (16GB recommended)
- **Storage**: At least 2GB free space
- **OS**: Windows 10+, macOS 10.15+, or Linux (Ubuntu 18.04+)

---

## 🚀 **Quick Start (Automated Setup)**

### **Option 1: Automated Setup Script (Recommended)**

**For macOS/Linux:**
```bash
# Make script executable and run
chmod +x setup-dev-environment.sh
./setup-dev-environment.sh
```

**For Windows:**
```cmd
# Run the batch script
setup-dev-environment.bat
```

The automated script will:
- ✅ Check Node.js and npm versions
- ✅ Install dependencies
- ✅ Create environment configuration
- ✅ Build the project
- ✅ Set up development tools
- ✅ Run initial tests (optional)
- ✅ Create helper scripts

### **Option 2: Manual Setup**

If you prefer manual setup or the automated script fails:

```bash
# 1. Clone the repository (if not already done)
git clone <repository-url>
cd privacy-cohort-tracker

# 2. Install dependencies
npm install

# 3. Create environment configuration
cp .env.example .env.local
# Edit .env.local with your preferred settings

# 4. Build the project
npm run build

# 5. Run tests to verify setup
npm test
```

---

## 🏗️ **Project Structure Overview**

```
privacy-cohort-tracker/
├── src/
│   ├── shared/                 # Shared components and interfaces
│   │   ├── interfaces/         # TypeScript interfaces
│   │   ├── core/              # Core business logic
│   │   └── data/              # Data files (taxonomy, etc.)
│   ├── browser-extension/      # Browser extension implementation
│   │   ├── manifest.json      # Extension manifest
│   │   ├── background.ts      # Service worker
│   │   ├── content.ts         # Content script
│   │   ├── popup.html         # Extension popup
│   │   └── popup.ts           # Popup logic
│   └── mobile/                # Mobile app implementations
│       ├── android/           # Android-specific code
│       └── ios/               # iOS-specific code
├── test/                      # Test files
├── docs/                      # Documentation
├── dist/                      # Built files (generated)
├── scripts/                   # Build and deployment scripts
└── package.json              # Project configuration
```

---

## 🛠️ **Development Commands**

### **Building the Project**
```bash
# Build everything
npm run build

# Build specific components
npm run build:shared      # Shared core library
npm run build:extension   # Browser extension
npm run build:mobile      # Mobile preparation

# Development builds (watch mode)
npm run dev              # All components
npm run dev:shared       # Shared library only
npm run dev:extension    # Extension only
```

### **Testing**
```bash
# Run all tests
npm test

# Run tests in watch mode (recommended for development)
npm run test:watch

# Run specific test types
npm run test:unit           # Unit tests only
npm run test:integration    # Integration tests
npm run test:e2e           # End-to-end tests
npm run test:privacy       # Privacy compliance tests
npm run test:performance   # Performance benchmarks

# Generate coverage report
npm run test:coverage
```

### **Code Quality**
```bash
# Lint code
npm run lint

# Fix linting issues automatically
npm run lint:fix

# Format code
npm run format

# Type checking
npm run type-check
```

---

## 🌐 **Browser Extension Development**

### **Loading Extension in Chrome**
1. Build the extension:
   ```bash
   npm run build:extension
   ```

2. Open Chrome and go to `chrome://extensions/`

3. Enable "Developer mode" (toggle in top right)

4. Click "Load unpacked"

5. Select the `dist/browser-extension` folder

6. The extension should now appear in your extensions list

### **Loading Extension in Firefox**
1. Build the extension:
   ```bash
   npm run build:extension:firefox
   ```

2. Open Firefox and go to `about:debugging`

3. Click "This Firefox"

4. Click "Load Temporary Add-on"

5. Navigate to `dist/browser-extension` and select `manifest.json`

### **Extension Development Workflow**
```bash
# Start development with hot reload
npm run dev:extension

# In another terminal, run tests
npm run test:watch

# Make changes to extension files
# The extension will rebuild automatically
# Reload the extension in browser to see changes
```

---

## 🧪 **Running Tests**

### **Test Categories**
- **Unit Tests**: Test individual components in isolation
- **Integration Tests**: Test component interactions
- **E2E Tests**: Test complete user workflows
- **Privacy Tests**: Validate privacy compliance
- **Performance Tests**: Benchmark system performance

### **Running Specific Tests**
```bash
# Run tests for a specific component
npm test -- --grep "NotificationSystem"

# Run tests in a specific file
npm test test/notification-feedback-integration.test.ts

# Run tests with verbose output
npm test -- --verbose

# Update test snapshots
npm run test:update-snapshots
```

### **Test Coverage**
```bash
# Generate coverage report
npm run test:coverage

# View coverage report in browser
# The report will be in coverage/index.html
```

---

## 🔧 **Development Environment**

### **Environment Configuration**
The `.env.local` file contains development settings:

```bash
# Development Environment
NODE_ENV=development
LOG_LEVEL=debug

# Privacy Settings
DATA_RETENTION_DAYS=21
K_ANONYMITY_THRESHOLD=100
DIFFERENTIAL_PRIVACY_EPSILON=0.1

# Security Settings
ENCRYPTION_ALGORITHM=AES-256-GCM
SECURE_STORAGE_ENABLED=true

# Feature Flags
ENABLE_ADVANCED_PRIVACY_CONTROLS=true
ENABLE_EXPERIMENTAL_FEATURES=false
ENABLE_DEBUG_MODE=true
```

### **VS Code Setup**
The project includes VS Code configuration:
- **Settings**: `.vscode/settings.json`
- **Extensions**: `.vscode/extensions.json`
- **Debugging**: Pre-configured debug settings

Recommended extensions:
- TypeScript and JavaScript Language Features
- ESLint
- Prettier
- Tailwind CSS IntelliSense

---

## 🚨 **Troubleshooting**

### **Common Issues**

#### **1. Node.js Version Issues**
```bash
# Check your Node.js version
node --version

# If version is < 18.0.0, update Node.js
# Visit https://nodejs.org/ or use nvm:
nvm install 18
nvm use 18
```

#### **2. Dependency Installation Issues**
```bash
# Clear npm cache and reinstall
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

#### **3. Build Failures**
```bash
# Clean build artifacts
npm run clean

# Rebuild everything
npm run build

# Check for TypeScript errors
npm run type-check
```

#### **4. Extension Loading Issues**
```bash
# Rebuild extension
npm run build:extension

# Check manifest file
cat dist/browser-extension/manifest.json

# Ensure all required files are present
ls -la dist/browser-extension/
```

#### **5. Test Failures**
```bash
# Run tests with detailed output
npm test -- --verbose

# Run a specific failing test
npm test -- --grep "specific test name"

# Clear test cache
npm test -- --clearCache
```

### **Getting Help**
- **Documentation**: Check `docs/` directory
- **GitHub Issues**: Report bugs and ask questions
- **Local Development Guide**: `3. LOCAL_DEVELOPMENT_GUIDE.md`
- **Team Chat**: Ask in team communication channels

---

## 📚 **Key Files and Directories**

### **Configuration Files**
- `package.json` - Project dependencies and scripts
- `tsconfig.json` - TypeScript configuration
- `vitest.config.ts` - Test configuration
- `webpack.extension.js` - Browser extension build config
- `.eslintrc.json` - Code linting rules

### **Source Code**
- `src/shared/core/` - Core business logic
- `src/shared/interfaces/` - TypeScript interfaces
- `src/browser-extension/` - Browser extension code
- `src/mobile/` - Mobile app code

### **Tests**
- `test/` - All test files
- `test/setup.ts` - Test setup configuration

### **Documentation**
- `README.md` - Project overview
- `3. LOCAL_DEVELOPMENT_GUIDE.md` - Detailed development guide
- `docs/` - Complete documentation

---

## 🎯 **Daily Development Workflow**

### **Starting Development**
```bash
# 1. Pull latest changes
git pull origin main

# 2. Install any new dependencies
npm install

# 3. Start development servers
npm run dev

# 4. In another terminal, run tests in watch mode
npm run test:watch
```

### **Making Changes**
```bash
# 1. Create feature branch
git checkout -b feature/your-feature-name

# 2. Make your changes

# 3. Run tests
npm test

# 4. Check code quality
npm run lint
npm run type-check

# 5. Build to ensure everything works
npm run build

# 6. Commit changes
git add .
git commit -m "feat: your feature description"

# 7. Push and create PR
git push origin feature/your-feature-name
```

### **Testing Your Changes**
```bash
# Test browser extension
npm run build:extension
# Load in Chrome/Firefox as described above

# Run comprehensive tests
npm run test:unit
npm run test:integration
npm run test:privacy

# Check performance impact
npm run test:performance
```

---

## 🎉 **Quick Verification Checklist**

After setup, verify everything works:

- [ ] `npm --version` shows version 8.0.0+
- [ ] `node --version` shows version 18.0.0+
- [ ] `npm install` completes without errors
- [ ] `npm run build` completes successfully
- [ ] `npm test` passes all tests
- [ ] Browser extension loads in Chrome/Firefox
- [ ] Development server starts with `npm run dev`
- [ ] Code linting works with `npm run lint`

---

## 📞 **Support and Resources**

### **Documentation**
- **Architecture**: `docs/development/architecture.md`
- **API Reference**: `docs/api/README.md`
- **Contributing**: `docs/development/contributing.md`
- **Security**: `docs/development/security.md`

### **Quick Reference**
- **Build Commands**: `npm run build`, `npm run dev`
- **Test Commands**: `npm test`, `npm run test:watch`
- **Quality Commands**: `npm run lint`, `npm run format`
- **Extension Loading**: Chrome extensions page, Firefox debugging page

### **Getting Help**
1. Check this guide and the documentation
2. Search existing GitHub issues
3. Ask in team communication channels
4. Create a new GitHub issue if needed

---

**🎉 Welcome to the Privacy Cohort Tracker development team!**

This project implements a privacy-first approach to interest-based advertising, replacing third-party cookies with local cohort processing. Your contributions help build a more private web for everyone.

Happy coding! 🚀